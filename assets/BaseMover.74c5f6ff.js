import{W as S,J as R,L as w,K as V,H as g,a2 as k}from"./particle.3af7776a.js";import"./index.424da776.js";const l=.5,r=0,f=1,P=60,T=0,A=.01;function E(n){var x,d;const o=n.initialPosition,{dx:e,dy:s}=S(o,n.position),a=Math.abs(e),t=Math.abs(s),{maxDistance:i}=n.retina,y=i.horizontal,c=i.vertical;if(!y&&!c)return;const v=(x=y&&a>=y)!=null?x:!1,h=(d=c&&t>=c)!=null?d:!1;if((v||h)&&!n.misplaced)n.misplaced=!!y&&a>y||!!c&&t>c,y&&(n.velocity.x=n.velocity.y*l-n.velocity.x),c&&(n.velocity.y=n.velocity.x*l-n.velocity.y);else if((!y||a<y)&&(!c||t<c)&&n.misplaced)n.misplaced=!1;else if(n.misplaced){const m=n.position,u=n.velocity;y&&(m.x<o.x&&u.x<r||m.x>o.x&&u.x>r)&&(u.x*=-R()),c&&(m.y<o.y&&u.y<r||m.y>o.y&&u.y>r)&&(u.y*=-R())}}function I(n,o,e,s,a,t){H(n,t);const i=n.gravity,y=(i==null?void 0:i.enable)&&i.inverse?-f:f;a&&e&&(n.velocity.x+=a*t.factor/(P*e)),(i==null?void 0:i.enable)&&e&&(n.velocity.y+=y*(i.acceleration*t.factor)/(P*e));const c=n.moveDecay;n.velocity.multTo(c);const v=n.velocity.mult(e);(i==null?void 0:i.enable)&&s>r&&(!i.inverse&&v.y>=r&&v.y>=s||i.inverse&&v.y<=r&&v.y<=-s)&&(v.y=y*s,e&&(n.velocity.y=v.y/e));const h=n.options.zIndex,x=(f-n.zIndexFactor)**h.velocityRate;v.multTo(x);const{position:d}=n;d.addTo(v),o.vibrate&&(d.x+=Math.sin(d.x*Math.cos(d.y)),d.y+=Math.cos(d.y*Math.sin(d.x)))}function C(n,o){const e=n.container;if(!n.spin)return;const s={x:n.spin.direction==="clockwise"?Math.cos:Math.sin,y:n.spin.direction==="clockwise"?Math.sin:Math.cos};n.position.x=n.spin.center.x+n.spin.radius*s.x(n.spin.angle),n.position.y=n.spin.center.y+n.spin.radius*s.y(n.spin.angle),n.spin.radius+=n.spin.acceleration;const a=Math.max(e.canvas.size.width,e.canvas.size.height),t=a*l;n.spin.radius>t?(n.spin.radius=t,n.spin.acceleration*=-f):n.spin.radius<T&&(n.spin.radius=T,n.spin.acceleration*=-f),n.spin.angle+=o*A*(f-n.spin.radius/a)}function H(n,o){var i;const e=n.options,s=e.move.path;if(!s.enable)return;if(n.lastPathTime<=n.pathDelay){n.lastPathTime+=o.value;return}const t=(i=n.pathGenerator)==null?void 0:i.generate(n,o);t&&n.velocity.addTo(t),s.clamp&&(n.velocity.x=w(n.velocity.x,-f,f),n.velocity.y=w(n.velocity.y,-f,f)),n.lastPathTime-=n.pathDelay}function O(n){return n.slow.inRange?n.slow.factor:f}function B(n){var x;const o=n.container,e=n.options,s=e.move.spin;if(!s.enable)return;const a=(x=s.position)!=null?x:{x:50,y:50},t=.01,i={x:a.x*t*o.canvas.size.width,y:a.y*t*o.canvas.size.height},y=n.getPosition(),c=V(y,i),v=g(s.acceleration);n.retina.spinAcceleration=v*o.retina.pixelRatio;const h=0;n.spin={center:i,direction:n.velocity.x>=h?"clockwise":"counter-clockwise",angle:n.velocity.angle,radius:c,acceleration:n.retina.spinAcceleration}}const G=2,J=1,K=1;class j{init(o){const e=o.options,s=e.move.gravity;o.gravity={enable:s.enable,acceleration:g(s.acceleration),inverse:s.inverse},B(o)}isEnabled(o){return!o.destroyed&&o.options.move.enable}move(o,e){var b,F,z,D,M;const s=o.options,a=s.move;if(!a.enable)return;const t=o.container,i=t.retina.pixelRatio;(F=(b=o.retina).moveSpeed)!=null||(b.moveSpeed=g(a.speed)*i),(D=(z=o.retina).moveDrift)!=null||(z.moveDrift=g(o.options.move.drift)*i);const y=O(o),c=o.retina.moveSpeed*t.retina.reduceFactor,v=o.retina.moveDrift,h=k(s.size.value)*i,x=a.size?o.getRadius()/h:J,d=e.factor||K,m=c*x*y*d/G,u=(M=o.retina.maxSpeed)!=null?M:t.retina.maxSpeed;a.spin.enable?C(o,m):I(o,a,m,u,v,e),E(o)}}export{j as BaseMover};
