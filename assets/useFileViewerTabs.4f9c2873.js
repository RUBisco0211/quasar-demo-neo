import{a as k,c as U,aY as w,aQ as d,a7 as v,bj as r,ah as c,c0 as f,ag as _,O as h,a9 as y,aW as I,Y as T,bl as B,c1 as C,aa as Q,r as b,aO as j}from"./index.424da776.js";import{a as p,Q as x,b as E}from"./selection.9c7fe5b0.js";import{Q as F}from"./QExpansionItem.f2b48083.js";const L=.3,M=k({__name:"DirectoryMenuItem",props:{item:{},fileSelectedCallBack:{type:Function}},setup(l){const t=U(()=>e.item.path?(e.item.path.split("/").length-1)*L:0),e=l;return(o,i)=>{var a,n;const m=w("directory-menu-item",!0);return(a=e.item)!=null&&a.children?(d(),v(F,{key:0,dense:"","model-value":(n=e.item)==null?void 0:n.expanded,"onUpdate:modelValue":i[0]||(i[0]=s=>e.item.expanded=s),"expand-icon":"mdi-chevron-down","header-inset-level":t.value},{header:r(()=>[c(p,{side:""},{default:r(()=>[c(f,{name:e.item.expanded?"mdi-folder-open-outline":e.item.icon,size:"xs"},null,8,["name"])]),_:1}),c(p,null,{default:r(()=>[c(x,null,{default:r(()=>[_(h(e.item.name),1)]),_:1})]),_:1})]),default:r(()=>{var s;return[(d(!0),y(T,null,I((s=e.item)==null?void 0:s.children,(u,g)=>(d(),v(m,{item:u,"file-selected-call-back":o.fileSelectedCallBack,key:g},null,8,["item","file-selected-call-back"]))),128))]}),_:1},8,["model-value","header-inset-level"])):B((d(),v(E,{key:1,dense:"",clickable:"",onClick:i[1]||(i[1]=s=>o.fileSelectedCallBack({...e.item})),"active-class":o.$q.dark.isActive?"bg-primary":"bg-grey-4","inset-level":t.value},{default:r(()=>[c(p,{side:""},{default:r(()=>[c(f,{name:e.item.icon,size:"xs"},null,8,["name"])]),_:1}),c(p,null,{default:r(()=>[c(x,{class:"text-weight-medium"},{default:r(()=>[_(h(e.item.name),1)]),_:1})]),_:1})]),_:1},8,["active-class","inset-level"])),[[C]])}}}),O={class:"text-center q-my-xl bg-transparent",style:{width:"100%",opacity:"0.6"},flat:""},R={class:"text-h6 text-primary text-center"},$=k({__name:"EmptyView",props:{icon:{default:"mdi-archive-alert"},label:{}},setup(l){const t=l;return(e,o)=>(d(),y("div",O,[c(f,{name:t.icon,size:"100px",color:"primary"},null,8,["name"]),Q("div",R,h(t.label),1)]))}}),V=()=>{const l=new Map;return{createObjectUrl:t=>{const e=URL.createObjectURL(t);return l.set(t,e),e},revokeAllUrls:()=>{l.forEach(URL.revokeObjectURL),l.clear()}}},{createObjectUrl:S,revokeAllUrls:A}=V();function q(){const l=b([]),t=b(void 0),e=a=>{if(a.code){t.value=a.path;return}switch(a.name.split(".").pop()){case"png":case"jpg":case"jpeg":{a.src=S(a.content),t.value=a.path;break}default:{const s=new FileReader;s.readAsText(a.content,"UTF-8"),s.onload=u=>{a.code=u.target.result,t.value=a.path}}}},o=a=>{l.value.find(n=>n.path===a.path)||l.value.push(a),e(a)},i=(a,n)=>{if(l.value=l.value.filter((s,u)=>u!==n),t.value===a.path){if(l.value.length===0){t.value=void 0;return}if(n===0){t.value=l.value[0].path;return}t.value=l.value[n-1].path}},m=()=>{l.value=[],t.value=void 0};return j(()=>{A()}),{fileTabs:l,currentTabName:t,resetTabs:m,addTab:o,viewFileContent:e,deleteTabByIndex:i}}export{M as _,$ as a,q as u};
