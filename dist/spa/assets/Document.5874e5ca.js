import{a as g,aY as T,aQ as o,a7 as c,r as v,a9 as _,ah as a,bj as l,c4 as b,H as s,c2 as h,Y as w,aW as x,c5 as V,K as B,n as y,bH as E,cI as A}from"./index.424da776.js";import{Q as P}from"./QToolbar.03d3f6c8.js";import{a as q}from"./TouchPan.f380c038.js";import{a as Q}from"./QScrollArea.d11b6410.js";import{a as L,Q as U,c as $,b as H}from"./QTabPanel.b16579db.js";import{Q as I}from"./QSplitter.9a47ab3c.js";import{u as M,_ as N,a as z}from"./useFileViewerTabs.4f9c2873.js";import{N as O}from"./notify.13a36a19.js";import"./selection.9c7fe5b0.js";import"./rtl.b51694b1.js";import"./QExpansionItem.f2b48083.js";const S=g({__name:"MarkDownArticle",props:{text:{default:""}},setup(p){const r=p;return(t,m)=>{const u=T("v-md-preview");return o(),c(u,{text:r.text},null,8,["text"])}}});function D(p){const r=v([]),t=v([]),{openFilePickerOptions:m,fileIcon:u,fileUpdatedCallBck:d}=p,f=async()=>{try{t.value=await window.showOpenFilePicker(m)}catch{O.error("\u6CA1\u6709\u9009\u62E9\u6587\u4EF6");return}for await(const n of t.value)r.value.push(await k(n));d&&d()},k=async n=>({name:n.name,icon:u,path:n.name,content:await n.getFile()});return{fileList:r,getFile:f}}const Y={class:"q-pa-md"},oe=g({__name:"Document",setup(p){const{fileTabs:r,currentTabName:t,deleteTabByIndex:m,addTab:u,resetTabs:d}=M(),{fileList:f,getFile:k}=D({fileUpdatedCallBck:d,fileIcon:"mdi-language-markdown",openFilePickerOptions:{multiple:!0,types:[{description:"Markdown",accept:{"text/markdown":[".md"]}}]}}),n=v(20);return(F,i)=>(o(),_("div",Y,[a(A,{flat:""},{default:l(()=>[a(I,{modelValue:n.value,"onUpdate:modelValue":i[2]||(i[2]=e=>n.value=e),limits:[20,50]},{before:l(()=>[a(P,{class:"q-pa-md"},{default:l(()=>[a(b,{unelevated:"",push:"",class:"full-width",dense:"",color:"primary",onClick:s(k),icon:"mdi-language-markdown","no-caps":"",label:"\u9009\u62E9 .md \u6587\u4EF6"},null,8,["onClick"])]),_:1}),a(h),a(Q,{style:{height:"calc(100vh - 63px - 64px - 1px - 2 * 16px - 2px)"}},{default:l(()=>[s(f).length>0?(o(),c(q,{key:0,class:"q-pa-none"},{default:l(()=>[(o(!0),_(w,null,x(s(f),e=>(o(),c(N,{key:e.name,item:e,"file-selected-call-back":s(u)},null,8,["item","file-selected-call-back"]))),128))]),_:1})):(o(),c(z,{key:1,icon:"mdi-file-alert-outline",label:"\u672A\u9009\u62E9 .md \u6587\u4EF6"}))]),_:1})]),separator:l(()=>[a(V,{color:"primary","text-color":"white",size:"30px",icon:"mdi-arrow-split-vertical",class:B(F.$q.dark.isActive?"":"shadow-7")},null,8,["class"])]),after:l(()=>[a(L,{"outside-arrows":"","mobile-arrows":"",dense:"","inline-label":"",align:"left",modelValue:s(t),"onUpdate:modelValue":i[0]||(i[0]=e=>y(t)?t.value=e:null),"active-color":"primary","switch-indicator":""},{default:l(()=>[(o(!0),_(w,null,x(s(r),(e,C)=>(o(),c(U,{class:"ellipsis",key:e.path,name:e.path,icon:e.icon,label:e.name,"no-caps":""},{default:l(()=>[a(b,{icon:"mdi-close",size:"10px",flat:"",round:"",dense:"",onClick:E(j=>s(m)(e,C),["stop"])},null,8,["onClick"])]),_:2},1032,["name","icon","label"]))),128))]),_:1},8,["modelValue"]),a($,{modelValue:s(t),"onUpdate:modelValue":i[1]||(i[1]=e=>y(t)?t.value=e:null),class:"bg-transparent","keep-alive":"",animated:""},{default:l(()=>[(o(!0),_(w,null,x(s(r),e=>(o(),c(H,{class:"q-pa-none",key:e.path,name:e.path},{default:l(()=>[a(h),a(Q,{style:{height:"calc(100vh - 63px - 36px - 1px - 2 * 16px - 2px)"}},{default:l(()=>[a(S,{text:e.code},null,8,["text"])]),_:2},1024)]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])]),_:1})]))}});export{oe as default};
