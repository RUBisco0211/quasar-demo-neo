import{Connect as x}from"./index.37d1c01d.js";import{g as C}from"./CanvasUtils.ab058ff4.js";import{a4 as R,g as m,L as P,n as S,S as O}from"./particle.24068059.js";import{E as k}from"./ExternalInteractorBase.0b0fb1e9.js";import"./index.93b2c2bb.js";const y=0,v=1,w=0;function D(s,t,n,o){const e=Math.floor(n.getRadius()/t.getRadius()),i=t.getFillColor(),a=n.getFillColor();if(!i||!a)return;const r=t.getPosition(),c=n.getPosition(),l=R(i,a,t.getRadius(),n.getRadius()),d=s.createLinearGradient(r.x,r.y,c.x,c.y);return d.addColorStop(y,m(i,o)),d.addColorStop(P(e,y,v),S(l,o)),d.addColorStop(v,m(a,o)),d}function E(s,t,n,o,e){C(s,o,e),s.lineWidth=t,s.strokeStyle=n,s.stroke()}function L(s,t,n,o){const e=s.actualOptions,i=e.interactivity.modes.connect;if(!!i)return D(t,n,o,i.links.opacity)}function F(s,t,n){s.canvas.draw(o=>{var r;const e=L(s,o,t,n);if(!e)return;const i=t.getPosition(),a=n.getPosition();E(o,(r=t.retina.linksWidth)!=null?r:w,e,i,a)})}const H="connect",p=0;class G extends k{constructor(t){super(t)}clear(){}init(){const t=this.container,n=t.actualOptions.interactivity.modes.connect;!n||(t.retina.connectModeDistance=n.distance*t.retina.pixelRatio,t.retina.connectModeRadius=n.radius*t.retina.pixelRatio)}interact(){const t=this.container;if(t.actualOptions.interactivity.events.onHover.enable&&t.interactivity.status==="pointermove"){const o=t.interactivity.mouse.position,{connectModeDistance:e,connectModeRadius:i}=t.retina;if(!e||e<p||!i||i<p||!o)return;const a=Math.abs(i),r=t.particles.quadTree.queryCircle(o,a,c=>this.isEnabled(c));r.forEach((c,l)=>{const d=c.getPosition(),M=1;for(const u of r.slice(l+M)){const f=u.getPosition(),g=Math.abs(e),h=Math.abs(d.x-f.x),b=Math.abs(d.y-f.y);h<g&&b<g&&F(t,c,u)}})}}isEnabled(t){var i;const n=this.container,o=n.interactivity.mouse,e=((i=t==null?void 0:t.interactivity)!=null?i:n.actualOptions.interactivity).events;return e.onHover.enable&&o.position?O(H,e.onHover.mode):!1}loadModeOptions(t,...n){t.connect||(t.connect=new x);for(const o of n)t.connect.load(o==null?void 0:o.connect)}reset(){}}export{G as Connector};
