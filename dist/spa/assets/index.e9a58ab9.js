import{bI as f}from"./index.93b2c2bb.js";import{g as h,c as p,d as c}from"./particle.24068059.js";const y=0,b=1,L=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d.]+%?\))|currentcolor/gi;function E(r,e,t){const{svgData:n}=r;if(!n)return"";const l=h(e,t);if(n.includes("fill"))return n.replace(L,()=>l);const o=n.indexOf(">");return`${n.substring(y,o)} fill="${l}"${n.substring(o)}`}async function d(r){return new Promise(e=>{r.loading=!0;const t=new Image;r.element=t,t.addEventListener("load",()=>{r.loading=!1,e()}),t.addEventListener("error",()=>{r.element=void 0,r.error=!0,r.loading=!1,p().error(`${c} loading image: ${r.source}`),e()}),t.src=r.source})}async function v(r){if(r.type!=="svg"){await d(r);return}r.loading=!0;const e=await fetch(r.source);e.ok?r.svgData=await e.text():(p().error(`${c} Image not found`),r.error=!0),r.loading=!1}function S(r,e,t,n){var a,s;const l=E(r,t,(s=(a=n.opacity)==null?void 0:a.value)!=null?s:b),o={color:t,gif:e.gif,data:{...r,svgData:l},loaded:!1,ratio:e.width/e.height,replaceColor:e.replaceColor,source:e.src};return new Promise(m=>{const _=new Blob([l],{type:"image/svg+xml"}),u=URL||window.URL||window.webkitURL||window,g=u.createObjectURL(_),i=new Image;i.addEventListener("load",()=>{o.loaded=!0,o.element=i,m(o),u.revokeObjectURL(g)});const I=async()=>{u.revokeObjectURL(g);const w={...r,error:!1,loading:!0};await d(w),o.loaded=!0,o.element=w.element,m(o)};i.addEventListener("error",()=>void I()),i.src=g})}var U=Object.freeze(Object.defineProperty({__proto__:null,loadImage:d,downloadSvgImage:v,replaceImageColor:S},Symbol.toStringTag,{value:"Module"}));const O=3;function P(r){r.loadImage||(r.loadImage=async e=>{var t,n,l;if(!e.name&&!e.src)throw new Error(`${c} no image source provided`);if(r.images||(r.images=[]),!r.images.find(o=>o.name===e.name||o.source===e.src))try{const o={gif:(t=e.gif)!=null?t:!1,name:(n=e.name)!=null?n:e.src,source:e.src,type:e.src.substring(e.src.length-O),error:!1,loading:!0,replaceColor:e.replaceColor,ratio:e.width&&e.height?e.width/e.height:void 0};r.images.push(o);let a;if(e.gif){const{loadGifImage:s}=await f(()=>import("./Utils.4d041286.js"),["assets/Utils.4d041286.js","assets/index.93b2c2bb.js","assets/index.e21b4dd1.css"]);a=s}else a=e.replaceColor?v:d;await a(o)}catch{throw new Error(`${c} ${(l=e.name)!=null?l:e.src} not found`)}})}async function R(r,e=!0){P(r);const{ImagePreloaderPlugin:t}=await f(()=>import("./ImagePreloader.70526eeb.js"),[]),{ImageDrawer:n}=await f(()=>import("./ImageDrawer.5c7fc79f.js"),["assets/ImageDrawer.5c7fc79f.js","assets/Utils.4d041286.js","assets/index.93b2c2bb.js","assets/index.e21b4dd1.css","assets/particle.24068059.js"]),l=new t(r);await r.addPlugin(l,e),await r.addShape(["image","images"],new n(r),e)}var $=Object.freeze(Object.defineProperty({__proto__:null,loadImageShape:R},Symbol.toStringTag,{value:"Module"}));export{U,$ as i,S as r};
