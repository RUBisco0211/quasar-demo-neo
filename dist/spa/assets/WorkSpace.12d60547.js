import{bJ as N,c7 as H,c8 as U,c as C,h as x,c0 as S,b$ as O,dm as M,dn as R,dl as W,bW as Y,a as F,aQ as p,a7 as _,bj as t,ah as a,a9 as E,aW as V,K as T,Y as B,aY as J,r as Q,c4 as q,H as c,aC as K,ag as $,O as G,c2 as I,c5 as X,n as L,bH as Z,cI as ee}from"./index.424da776.js";import{Q as A}from"./QToolbar.03d3f6c8.js";import{b as P,a as j,Q as ae}from"./selection.9c7fe5b0.js";import{Q as te}from"./QSelect.1e4868f6.js";import{Q as se}from"./QSpace.f67be330.js";import{Q as z}from"./QTooltip.86b3841e.js";import{a as le}from"./TouchPan.f380c038.js";import{a as D}from"./QScrollArea.d11b6410.js";import{a as ne,Q as re,c as oe,b as ie}from"./QTabPanel.b16579db.js";import{Q as ue}from"./QImg.6ac94f73.js";import{Q as ce}from"./QSplitter.9a47ab3c.js";import{u as de,_ as me,a as pe}from"./useFileViewerTabs.4f9c2873.js";import{N as fe}from"./notify.13a36a19.js";import"./QMenu.7611602c.js";import"./position-engine.4ffd6584.js";import"./rtl.b51694b1.js";import"./QExpansionItem.f2b48083.js";var ge=N({name:"QBreadcrumbsEl",props:{...H,label:String,icon:String,tag:{type:String,default:"span"}},emits:["click"],setup(s,{slots:o}){const{linkTag:r,linkAttrs:f,linkClass:g,navigateOnClick:v}=U(),i=C(()=>({class:"q-breadcrumbs__el q-link flex inline items-center relative-position "+(s.disable!==!0?"q-link--focusable"+g.value:"q-breadcrumbs__el--disable"),...f.value,onClick:v})),b=C(()=>"q-breadcrumbs__el-icon"+(s.label!==void 0?" q-breadcrumbs__el-icon--with-label":""));return()=>{const d=[];return s.icon!==void 0&&d.push(x(S,{class:b.value,name:s.icon})),s.label!==void 0&&d.push(s.label),x(r.value,{...i.value},O(o.default,d))}}});const ve=["",!0];var he=N({name:"QBreadcrumbs",props:{...M,separator:{type:String,default:"/"},separatorColor:String,activeColor:{type:String,default:"primary"},gutter:{type:String,validator:s=>["none","xs","sm","md","lg","xl"].includes(s),default:"sm"}},setup(s,{slots:o}){const r=R(s),f=C(()=>`flex items-center ${r.value}${s.gutter==="none"?"":` q-gutter-${s.gutter}`}`),g=C(()=>s.separatorColor?` text-${s.separatorColor}`:""),v=C(()=>` text-${s.activeColor}`);return()=>{const i=W(Y(o.default));if(i.length===0)return;let b=1;const d=[],y=i.filter(l=>l.type!==void 0&&l.type.name==="QBreadcrumbsEl").length,n=o.separator!==void 0?o.separator:()=>s.separator;return i.forEach(l=>{if(l.type!==void 0&&l.type.name==="QBreadcrumbsEl"){const m=b<y,h=l.props!==null&&ve.includes(l.props.disable),w=(m===!0?"":" q-breadcrumbs--last")+(h!==!0&&m===!0?v.value:"");b++,d.push(x("div",{class:`flex items-center${w}`},[l])),m===!0&&d.push(x("div",{class:"q-breadcrumbs__separator"+g.value},n()))}else d.push(l)}),x("div",{class:"q-breadcrumbs"},[x("div",{class:f.value},d)])}}});const be=F({__name:"FilePathBreadCrumbs",props:{path:{},icon:{}},setup(s){const o=s,r=C(()=>o.path.split("/"));return(f,g)=>(p(),_(he,null,{separator:t(()=>[a(S,{size:"1em",name:"mdi-chevron-double-right"})]),default:t(()=>[(p(!0),E(B,null,V(r.value,(v,i)=>(p(),_(ge,{class:T(f.$q.dark.isActive?"text-white":"text-dark"),key:v,label:v,icon:i===r.value.length-1?o.icon:"mdi-folder-open-outline"},null,8,["class","label","icon"]))),128))]),_:1}))}}),_e={class:"q-pa-lg"},ye=F({__name:"HighLightCode",props:{code:{}},setup(s){const o=s;return(r,f)=>{const g=J("highlightjs");return p(),E("div",_e,[a(g,{autodetect:"",style:{cursor:"text"},code:o.code,class:T(r.$q.dark.isActive?"hljs-atom-one-dark":"hljs-atom-one-light")},null,8,["code","class"])])}}});function ke(s){const{directoryUpdatedCallBack:o}=s,r=Q(),f=Q(),g=Q([]),v=async()=>{try{f.value=await window.showDirectoryPicker({mode:"read"})}catch{fe.error("\u6CA1\u6709\u9009\u62E9\u6587\u4EF6\u5939");return}r.value=await i(f.value,`${f.value.name}`),o&&o()},i=async(n,l)=>{if(n instanceof FileSystemFileHandle){const h={name:n.name,path:l,icon:d(n.name),content:await n.getFile()};return g.value.push(h),h}const m=[];return(await b(n.values())).forEach(async h=>{m.push(await i(h,`${l}/${h.name}`))}),{name:n.name,expanded:!1,path:l,icon:"mdi-folder-outline",children:m}},b=async n=>{const l=[];for await(const m of n)l.push(m);return l},d=n=>{switch(n.split(".").pop()){case"gitignore":case"gitkeep":return"mdi-git";case"md":return"mdi-language-markdown";case"vue":return"mdi-vuejs";case"ts":return"mdi-language-typescript";case"js":return"mdi-language-javascript";case"json":return"mdi-code-json";case"md":return"mdi-markdown";case"html":return"mdi-language-html5";case"css":return"mdi-language-css3";case"scss":return"mdi-language-css3";case"sass":return"mdi-language-sass";case"less":return"mdi-language-css3";case"png":case"jpg":case"jpeg":case"gif":return"mdi-file-image";case"svg":return"mdi-svg";case"c":return"mdi-language-c";case"cpp":return"mdi-language-cpp";case"cs":return"mdi-language-csharp";case"go":return"mdi-language-go";case"java":return"mdi-language-java";default:return"mdi-file"}},y=(n,l)=>{n.children&&(n.expanded=l,n.children.forEach(m=>y(m,l)))};return{directory:r,fileList:g,getDirectory:v,switchItemExpansion:y}}const xe={class:"q-pa-md"},Ne=F({__name:"WorkSpace",setup(s){const{fileTabs:o,currentTabName:r,deleteTabByIndex:f,addTab:g,resetTabs:v}=de(),{directory:i,getDirectory:b,switchItemExpansion:d,fileList:y}=ke({directoryUpdatedCallBack:v}),n=Q(20),l=Q([]),m=Q(""),h=(w,u)=>{u(()=>{const e=w.toLowerCase();l.value=y.value.filter(k=>k.path.toLowerCase().indexOf(e)>-1)})};return(w,u)=>(p(),E("div",xe,[a(ee,{flat:""},{default:t(()=>[a(ce,{modelValue:n.value,"onUpdate:modelValue":u[5]||(u[5]=e=>n.value=e),limits:[20,50]},{before:t(()=>[a(A,{class:"q-pa-md"},{default:t(()=>[a(q,{unelevated:"",push:"",class:"full-width",dense:"",color:"primary",onClick:c(b),icon:"mdi-folder-plus-outline",label:"\u9009\u62E9\u6587\u4EF6\u5939"},null,8,["onClick"])]),_:1}),a(A,{class:"q-px-md q-pb-md"},{default:t(()=>[a(te,{modelValue:m.value,"onUpdate:modelValue":u[0]||(u[0]=e=>m.value=e),dense:"","transition-show":"jump-up","transition-hide":"jump-up","input-debounce":"300","use-input":"","hide-selected":"",placeholder:"\u641C\u7D22\u6587\u4EF6...",outlined:"","dropdown-icon":"eva-arrow-down-outline","options-dense":"",options:l.value,"option-value":e=>e,onFilter:h},{prepend:t(()=>[a(S,{size:"xs",name:"eva-search-outline"})]),option:t(e=>[a(P,K({class:"dense-menu-option",dense:""},e.itemProps,{onClick:k=>c(g)(e.opt)}),{default:t(()=>[a(j,{side:""},{default:t(()=>[a(S,{name:e.opt.icon,size:"xs"},null,8,["name"])]),_:2},1024),a(j,null,{default:t(()=>[a(ae,null,{default:t(()=>[$(G(e.opt.path),1)]),_:2},1024)]),_:2},1024),a(j)]),_:2},1040,["onClick"])]),"no-option":t(()=>[a(P,null,{default:t(()=>[a(j,{class:"text-grey"},{default:t(()=>[$(" \u6682\u65E0\u6587\u4EF6 ")]),_:1})]),_:1})]),_:1},8,["modelValue","options","option-value"]),a(se),a(q,{flat:"",dense:"",onClick:u[1]||(u[1]=e=>c(d)(c(i),!0)),icon:"mdi-unfold-more-horizontal"},{default:t(()=>[a(z,null,{default:t(()=>[$(" \u5C55\u5F00\u5168\u90E8 ")]),_:1})]),_:1}),a(q,{flat:"",dense:"",onClick:u[2]||(u[2]=e=>c(d)(c(i),!1)),icon:"mdi-unfold-less-horizontal"},{default:t(()=>[a(z,null,{default:t(()=>[$(" \u6536\u8D77\u5168\u90E8 ")]),_:1})]),_:1})]),_:1}),a(I),a(D,{style:{height:`calc(\r
                                100vh - 63px - 64px - 56px - 1px - 2 * 16px -\r
                                    2px\r
                            )`}},{default:t(()=>[c(i)?(p(),_(le,{key:0,class:"q-pa-none"},{default:t(()=>[a(me,{item:c(i),"file-selected-call-back":c(g)},null,8,["item","file-selected-call-back"])]),_:1})):(p(),_(pe,{key:1,icon:"mdi-folder-alert-outline",label:"\u672A\u9009\u62E9\u6587\u4EF6\u5939"}))]),_:1})]),separator:t(()=>[a(X,{color:"primary","text-color":"white",size:"30px",icon:"eva-code-outline",class:T(w.$q.dark.isActive?"":"shadow-7")},null,8,["class"])]),after:t(()=>[a(ne,{"outside-arrows":"","mobile-arrows":"",dense:"","inline-label":"",align:"left",modelValue:c(r),"onUpdate:modelValue":u[3]||(u[3]=e=>L(r)?r.value=e:null),"active-color":"primary","switch-indicator":""},{default:t(()=>[(p(!0),E(B,null,V(c(o),(e,k)=>(p(),_(re,{class:"ellipsis",key:e.path,name:e.path,icon:e.icon,label:e.name,"no-caps":""},{default:t(()=>[a(q,{icon:"mdi-close",size:"10px",flat:"",round:"",dense:"",onClick:Z(Ce=>c(f)(e,k),["stop"])},null,8,["onClick"])]),_:2},1032,["name","icon","label"]))),128))]),_:1},8,["modelValue"]),a(oe,{modelValue:c(r),"onUpdate:modelValue":u[4]||(u[4]=e=>L(r)?r.value=e:null),class:"bg-transparent","keep-alive":"",animated:""},{default:t(()=>[(p(!0),E(B,null,V(c(o),e=>(p(),_(ie,{class:"q-pa-none",key:e.path,name:e.path},{default:t(()=>[a(be,{class:"q-px-md q-py-sm",icon:e.icon,path:e.path},null,8,["icon","path"]),a(I),a(D,{style:{height:`calc(\r
                                        100vh - 63px - 36px - 37px - 1px - 2 *\r
                                            16px - 2px\r
                                    )`}},{default:t(()=>[["png","jpg","jpeg"].find(k=>k===e.name.split(".").pop())?(p(),_(ue,{key:1,src:e.src,style:{height:"50%",width:"50%",margin:"auto"}},null,8,["src"])):(p(),_(ye,{key:0,code:e.code},null,8,["code"]))]),_:2},1024)]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])]),_:1})]))}});export{Ne as default};
